{"version":3,"sources":["webpack:///webpack/bootstrap cf241e2b2a82950de53a","webpack:///./sequencer.js","webpack:///./scripts/sequencer.js","webpack:///./~/process/browser.js","webpack:///./~/handles.js/dist/handles.js","webpack:///./scripts/extensions/do-extension.js","webpack:///./scripts/extensions/do-sequence-extension.js","webpack:///./scripts/extensions/do-wait-extension.js","webpack:///./scripts/extensions/do-wait-for-handle-extension.js","webpack:///./scripts/extensions/do-wait-for-promise-extension.js","webpack:///./scripts/extensions/do-wait-for-release-extension.js","webpack:///./scripts/extensions/do-wait-for-releases-extension.js"],"names":["Sequencer","require","extend","prototype","module","exports","Handle","sequence","currentTask","currentHandle","processing","push","task","resumeProcessing","clear","cancel","isEmpty","length","process","finishProcessing","handle","shift","perform","DoTask","action","release","sequencerPrototype","do","DoSequenceTask","that","sequencer","doSequence","DoWaitTask","duration","timeout","setTimeout","clearTimeout","doWait","DoWaitForHandleTask","handleToWaitFor","isReleased","addOnReleaseHandler","doWaitForHandle","DoWaitForPromiseTask","promise","onFulfilled","onRejected","then","value","reason","doWaitForPromise","DoWaitForReleaseTask","doWaitForRelease","CounterHandle","DoWaitForReleasesTask","count","counterHandle","releaseAll","doWaitForReleases"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA,KAAIA,YAAY,mBAAAC,CAAQ,CAAR,CAAhB;;AAEA,oBAAAA,CAAQ,CAAR,EAA2CC,MAA3C,CAAkDF,UAAUG,SAA5D;AACA,oBAAAF,CAAQ,CAAR,EAAoDC,MAApD,CAA2DF,UAAUG,SAArE;AACA,oBAAAF,CAAQ,CAAR,EAAgDC,MAAhD,CAAuDF,UAAUG,SAAjE;AACA,oBAAAF,CAAQ,CAAR,EAA2DC,MAA3D,CAAkEF,UAAUG,SAA5E;AACA,oBAAAF,CAAQ,CAAR,EAA4DC,MAA5D,CAAmEF,UAAUG,SAA7E;AACA,oBAAAF,CAAQ,CAAR,EAA4DC,MAA5D,CAAmEF,UAAUG,SAA7E;AACA,oBAAAF,CAAQ,EAAR,EAA6DC,MAA7D,CAAoEF,UAAUG,SAA9E;;AAEAC,QAAOC,OAAP,GAAiBL,SAAjB,C;;;;;;;;ACVA,KAAIM,SAAS,mBAAAL,CAAQ,CAAR,EAAsBK,MAAnC;;AAEA,KAAIN,YAAY,SAAZA,SAAY,GAAY;AAC1B,OAAIO,WAAW,EAAf;AACA,OAAIC,cAAc,IAAlB;AACA,OAAIC,gBAAgB,IAApB;AACA,OAAIC,aAAa,KAAjB;;AAEA,QAAKC,IAAL,GAAY,UAAUC,IAAV,EAAgB;AAC1BL,cAASI,IAAT,CAAcC,IAAd;AACAC;AACD,IAHD;;AAKA,QAAKC,KAAL,GAAa,YAAY;AACvBP,gBAAW,EAAX;AACA,SAAIC,gBAAgB,IAAhB,IAAwB,OAAQA,YAAYO,MAApB,KAAgC,WAA5D,EAAyE;AACvEP,mBAAYO,MAAZ,CAAmBN,aAAnB;AACD;AACF,IALD;;AAOA,QAAKO,OAAL,GAAe,YAAY;AACzB,YAAOT,SAASU,MAAT,KAAoB,CAA3B;AACD,IAFD;;AAIA,YAASJ,gBAAT,GAA4B;AAC1B,SAAIH,UAAJ,EAAgB;AAChBA,kBAAa,IAAb;AACAQ;AACD;;AAED,YAASC,gBAAT,GAA4B;AAC1B,SAAIZ,SAASU,MAAT,KAAoB,CAAxB,EAA2B,OAAO,KAAP;AAC3BP,kBAAa,KAAb;AACA,YAAO,IAAP;AACD;;AAED,YAASQ,OAAT,GAAmB;AACjB,SAAIC,kBAAJ,EAAwB;;AAExB;AACA,SAAIC,SAAS,IAAId,MAAJ,CAAW,YAAY;AAClCE,qBAAc,IAAd;AACAC,uBAAgB,IAAhB;AACAS;AACD,MAJY,CAAb;;AAMA;AACA;AACA,SAAIN,OAAOL,SAASc,KAAT,EAAX;AACAb,mBAAcI,IAAd;AACAH,qBAAgBW,MAAhB;AACAR,UAAKU,OAAL,CAAaF,MAAb;AACD;AACF,EAnDD;;AAqDAhB,QAAOC,OAAP,GAAiBL,SAAjB,C;;;;;;;ACvDA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAqC;;AAErC;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;ACvLtC;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAM;AACN;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAO;AACP;AACA,oC;;;;;;;;ACrIA,KAAIuB,SAAS,SAATA,MAAS,CAAUC,MAAV,EAAkB;AAC7B,QAAKF,OAAL,GAAe,UAAUF,MAAV,EAAkB;AAC/BI;AACAJ,YAAOK,OAAP;AACD,IAHD;AAID,EALD;;AAOArB,QAAOC,OAAP,GAAiB;AACfH,WAAQ,gBAAUwB,kBAAV,EAA8B;AACpCA,wBAAmBC,EAAnB,GAAwB,UAAUH,MAAV,EAAkB;AACxC,YAAKb,IAAL,CAAU,IAAIY,MAAJ,CAAWC,MAAX,CAAV;AACA,cAAO,IAAP;AACD,MAHD;AAID;AANc,EAAjB,C;;;;;;;;ACPA,KAAIxB,YAAY,mBAAAC,CAAQ,CAAR,CAAhB;;AAEA,KAAI2B,iBAAiB,SAAjBA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","file":"sequencer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cf241e2b2a82950de53a","let Sequencer = require(\"scripts/sequencer.js\");\n\nrequire(\"scripts/extensions/do-extension\").extend(Sequencer.prototype);\nrequire(\"scripts/extensions/do-sequence-extension\").extend(Sequencer.prototype);\nrequire(\"scripts/extensions/do-wait-extension\").extend(Sequencer.prototype);\nrequire(\"scripts/extensions/do-wait-for-handle-extension\").extend(Sequencer.prototype);\nrequire(\"scripts/extensions/do-wait-for-promise-extension\").extend(Sequencer.prototype);\nrequire(\"scripts/extensions/do-wait-for-release-extension\").extend(Sequencer.prototype);\nrequire(\"scripts/extensions/do-wait-for-releases-extension\").extend(Sequencer.prototype);\n\nmodule.exports = Sequencer;\n\n\n\n// WEBPACK FOOTER //\n// ./sequencer.js","let Handle = require(\"handles.js\").Handle;\n\nlet Sequencer = function () {\n  let sequence = [];\n  let currentTask = null;\n  let currentHandle = null;\n  let processing = false;\n\n  this.push = function (task) {\n    sequence.push(task);\n    resumeProcessing();\n  };\n\n  this.clear = function () {\n    sequence = [];\n    if (currentTask !== null && typeof (currentTask.cancel) !== \"undefined\") {\n      currentTask.cancel(currentHandle);\n    }\n  };\n\n  this.isEmpty = function () {\n    return sequence.length === 0;\n  };\n\n  function resumeProcessing() {\n    if (processing) return;\n    processing = true;\n    process();\n  }\n\n  function finishProcessing() {\n    if (sequence.length !== 0) return false;\n    processing = false;\n    return true;\n  }\n\n  function process() {\n    if (finishProcessing()) return;\n\n    // When the handle is released, we'll process the next task\n    let handle = new Handle(function () {\n      currentTask = null;\n      currentHandle = null;\n      process();\n    });\n\n    // Perform the next task, providing it with the handle it can\n    // release to signify that its job is done\n    let task = sequence.shift();\n    currentTask = task;\n    currentHandle = handle;\n    task.perform(handle);\n  }\n};\n\nmodule.exports = Sequencer;\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/sequencer.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 2\n// module chunks = 0","module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = {\r\n\t  Handle: __webpack_require__(1),\r\n\t  CounterHandle: __webpack_require__(2)\r\n\t};\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Handle = function Handle(onRelease) {\n\t  var that = this;\n\t  var onReleaseHandlers = [];\n\t\n\t  if (!(typeof onRelease === \"undefined\")) onReleaseHandlers.push(onRelease);\n\t\n\t  function callReleaseHandlers() {\n\t    onReleaseHandlers.forEach(function (handler) {\n\t      return handler();\n\t    });\n\t  }\n\t\n\t  this.isReleased = false;\n\t\n\t  this.addOnReleaseHandler = function (handler) {\n\t    onReleaseHandlers.push(handler);\n\t  };\n\t\n\t  this.release = function () {\n\t    if (that.isReleased) return;\n\t    that.isReleased = true;\n\t    callReleaseHandlers();\n\t  };\n\t};\n\t\n\tmodule.exports = Handle;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar CounterHandle = function CounterHandle(count, onRelease) {\n\t  var that = this;\n\t  var onReleaseHandlers = [];\n\t\n\t  if (count === 0) throw new Error(\"Count must be greater than zero!\");\n\t\n\t  if (!(typeof onRelease === \"undefined\")) onReleaseHandlers.push(onRelease);\n\t\n\t  function callReleaseHandlers() {\n\t    onReleaseHandlers.forEach(function (handler) {\n\t      return handler();\n\t    });\n\t  }\n\t\n\t  this.isReleased = false;\n\t  this.releaseCount = 0;\n\t\n\t  this.addOnReleaseHandler = function (handler) {\n\t    onReleaseHandlers.push(handler);\n\t  };\n\t\n\t  this.release = function () {\n\t    if (that.isReleased) return;\n\t    that.releaseCount += 1;\n\t    if (that.releaseCount === count) {\n\t      that.isReleased = true;\n\t      callReleaseHandlers();\n\t    }\n\t  };\n\t\n\t  this.releaseAll = function () {\n\t    if (that.isReleased) return;\n\t    that.isReleased = true;\n\t    callReleaseHandlers();\n\t  };\n\t};\n\t\n\tmodule.exports = CounterHandle;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=handles.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/handles.js/dist/handles.js\n// module id = 3\n// module chunks = 0","let DoTask = function (action) {\n  this.perform = function (handle) {\n    action();\n    handle.release();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.do = function (action) {\n      this.push(new DoTask(action));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-extension.js","let Sequencer = require(\"../sequencer\");\n\nlet DoSequenceTask = function (action) {\n  let that = this;\n\n  this.sequencer = new Sequencer();\n\n  this.perform = function (handle) {\n    action(that.sequencer); // Let the caller enqueue his own subtasks\n    that.sequencer.do(handle.release); // Enqueue a final task to release the sequence task's handle\n  };\n  this.cancel = function (handle) {\n    that.sequencer.clear();\n    handle.release();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.doSequence = function (action) {\n      this.push(new DoSequenceTask(action));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-sequence-extension.js","let DoWaitTask = function (duration) {\n  let that = this;\n\n  this.timeout = null;\n\n  this.perform = function (handle) {\n    if (duration < 0.00001) {\n      handle.release();\n      return;\n    }\n    that.timeout = setTimeout(handle.release, duration);\n  };\n  this.cancel = function (handle) {\n    if (that.timeout !== null) clearTimeout(that.timeout);\n    handle.release();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.doWait = function (duration) {\n      this.push(new DoWaitTask(duration));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-wait-extension.js","let DoWaitForHandleTask = function (handleToWaitFor) {\n  this.perform = function (handle) {\n    if (handleToWaitFor.isReleased) {\n      handle.release();\n      return;\n    }\n    handleToWaitFor.addOnReleaseHandler(handle.release);\n  };\n  this.cancel = function (handle) {\n    handle.release();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.doWaitForHandle = function (handleToWaitFor) {\n      this.push(new DoWaitForHandleTask(handleToWaitFor));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-wait-for-handle-extension.js","// May require an ES6 promises polyfill such as \"es6-promise\", depending on the environment\n\nlet DoWaitForPromiseTask = function (promise, onFulfilled, onRejected) {\n  this.perform = function (handle) {\n    promise.then(value => {\n      if (typeof (onFulfilled) !== \"undefined\") onFulfilled(value);\n      handle.release();\n    }, reason => {\n      if (typeof (onRejected) !== \"undefined\") onRejected(reason);\n      handle.release();\n    });\n  };\n  this.cancel = function (handle) {\n    // Allows monkey-patching an ES6 promise with a cancel function that will\n    // automatically be invoked by the sequencer when it cancels this task.\n    // Details: http://stackoverflow.com/a/25346945/167983\n    if (typeof (promise.cancel) !== \"undefined\") promise.cancel();\n    handle.release();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.doWaitForPromise = function (promise, onFulfilled, onRejected) {\n      this.push(new DoWaitForPromiseTask(promise, onFulfilled, onRejected));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-wait-for-promise-extension.js","let DoWaitForReleaseTask = function (action) {\n  this.perform = function (handle) {\n    // The caller is provided with the release() function directly.\n    // The use of an handle is an internal implementation detail.\n    action(handle.release);\n  };\n  this.cancel = function (handle) {\n    handle.release();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.doWaitForRelease = function (action) {\n      this.push(new DoWaitForReleaseTask(action));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-wait-for-release-extension.js","let CounterHandle = require(\"handles.js\").CounterHandle;\n\nlet DoWaitForReleasesTask = function (count, action) {\n  let that = this;\n\n  this.counterHandle = new CounterHandle(count);\n\n  this.perform = function (handle) {\n    // When the counter handle is released for the last time, the sequencer handle is released too.\n    that.counterHandle.addOnReleaseHandler(handle.release);\n\n    // The caller is provided with the CounterHandle release() function directly.\n    // The use of a CounterHandle is an internal implementation detail.\n    action(that.counterHandle.release);\n  };\n  this.cancel = function (handle) {\n    that.counterHandle.releaseAll();\n  };\n};\n\nmodule.exports = {\n  extend: function (sequencerPrototype) {\n    sequencerPrototype.doWaitForReleases = function (count, action) {\n      this.push(new DoWaitForReleasesTask(count, action));\n      return this;\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/extensions/do-wait-for-releases-extension.js"],"sourceRoot":""}