var Handle=function(e){var n=this;this.isReleased=!1,this.release=function(){n.isReleased=!0,e()}},Sequencer=function(){function e(){i||(i=!0,t())}function n(){return 0!=o.length?!1:(i=!1,!0)}function t(){if(!n()){var e=new Handle(t),i=o.shift();i.perform(e)}}var i=!1,o=[];this.push=function(n){o.push(n),e()}},DoTask=function(e){this.perform=function(n){e(),n.release()}};Sequencer.prototype["do"]=function(e){return this.push(new DoTask(e)),this};var DoWaitTask=function(e){this.perform=function(n){setTimeout(n.release,e)}};Sequencer.prototype.doWait=function(e){return this.push(new DoWaitTask(e)),this};var DoWaitForHandleTask=function(e){function n(e){e.isReleased||setTimeout(function(){n(e)},50)}this.perform=function(t){n(e),t.release()}};Sequencer.prototype.doWait=function(e){return this.push(new DoWaitForHandleTask(e)),this};var DoWithHandleTask=function(e){this.perform=function(n){e(n)}};Sequencer.prototype.doWithHandle=function(e){return this.push(new DoWithHandleTask(e)),this};