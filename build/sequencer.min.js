var Handle=function(n){this.release=function(){n()}},Sequencer=function(){function n(){i||(i=!0,e())}function t(){return 0!=o.length?!1:(i=!1,!0)}function e(){if(!t()){var n=new Handle(e),i=o.shift();i.perform(n)}}var i=!1,o=[];this.push=function(t){o.push(t),n()}},ActionTask=function(n){this.perform=function(t){n(),t.release()}};Sequencer.prototype["do"]=function(n){return this.push(new ActionTask(n)),this};var WaitTask=function(n){this.perform=function(t){setTimeout(t.release,n)}};Sequencer.prototype.doWait=function(n){return this.push(new WaitTask(n)),this};var WaitForHandleTask=function(n){this.perform=function(t){n(t)}};Sequencer.prototype.doWaitForHandle=function(n){return this.push(new WaitForHandleTask(n)),this};